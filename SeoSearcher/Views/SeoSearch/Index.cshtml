@using System.Data.Entity.ModelConfiguration.Conventions
@using System.Diagnostics.Eventing.Reader
@using SeoSearcher.Models
@model SeoSearcher.Models.ViewModels.SeoSearchResultsViewModel
@{
    ViewBag.Title = "SeoSearch";
}
@*<h2>@ViewBag.Title.</h2>
    <h3>@ViewBag.Message</h3>*@

<style>
    .primay-color {
        color: blue;
    }
</style>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="pull-right">

        <span class="pull-right">
            @using (Html.BeginForm("SaveFavourite", "SeoSearch", Model.SeoSearch))
            {
                @Html.AntiForgeryToken()

                @Html.HiddenFor(m => Model.SeoSearch.KeyWords)
                @Html.HiddenFor(m => Model.SeoSearch.TargetUrl)
                <input type="submit" value="Make Favourite" class="btn btn-warning btn-md" formaction="post" />
            }
        </span>
        <span class="pull-right">&nbsp;</span>
        <span class="pull-right">
            @using (Html.BeginForm("SaveResults", "SeoSearch", Model.SeoSearch))
            {
                @Html.AntiForgeryToken()

                @Html.HiddenFor(m => Model.SeoSearch.Results)
                @*<input type="submit" value="Match" />*@
                <input type="submit" value="Save Results" class="btn btn-primary btn-md btn " formaction="post" />

            }
        </span>

    </div>
}



<h2>
    SEO keywords:
    <span class="text-primary">
        "@Model.SeoSearch.KeyWords"
    </span>
</h2>

<h2>
    Top
    @Model.SeoSearch.MaxResults
    rankings for
    <span class="text-primary">
        @Model.SeoSearch.TargetUrl
    </span>
    as of
    <span class="text-nowrap">
        @Model.SeoSearch.DateRun.ToLongDateString()
    </span>
</h2>
@if (!Model.TargetUrlRankings.Any())
{
    <span class="col-md-2 text-danger h2">None!</span>

}
else
{
    <div class="row">

        @foreach (var ranking in Model.TargetUrlRankings)
        {
            <span class=" col-md-1 text-success h2">
                #@Html.DisplayFor(modelItem => ranking)
            </span>
        }
    </div>
    <hr />
    <button class="btn btn-primary btn-md col-md-12 clearfix" data-toggle="collapse" data-target="#FullResults">
        Toggle Full Results
    </button>

    <div id="FullResults" class="collapse clearfix">
        <table class="table-striped table-hover col-md-12">

            @foreach (var result in Model.SeoSearch.Results.OrderBy(x => x.Rank))
            {
                <tr class="full-results">
                    <td class="col-md-1 lead">
                        @Html.DisplayFor(modelItem => result.Rank)
                    </td>
                    <td class="col-md-11">
                        <a href="@result.FullUrl">@result.FullUrl</a>
                    </td>
                </tr>
            }
        </table>
    </div>

}






</div>